#include<stdio.h>
#include<string.h>
#include<ctype.h>

char prod[10][10];
char leading[10][10];
int n;

int isNonTerminal(char c)
{
    return (c >= 'A' && c <= 'Z');
}

void addLeading(int i, char c)
{
    int k;
    for(k = 0; leading[i][k] != '\0'; k++)
        if(leading[i][k] == c)
            return;

    leading[i][k] = c;
    leading[i][k+1] = '\0';
}

void findLeading(int i)
{
    int j;

    // RHS starts at index 2 (like E=E+T)
    char first = prod[i][2];

    if(!isNonTerminal(first))
    {
        addLeading(i, first);
        return;
    }

    for(j = 0; j < n; j++)
    {
        if(prod[j][0] == first)
        {
            findLeading(j);
            strcat(leading[i], leading[j]);
        }
    }
}

int main()
{
    int i;

    printf("Enter number of productions: ");
    scanf("%d", &n);

    printf("Enter productions (example E=E+T):\n");
    for(i = 0; i < n; i++)
        scanf("%s", prod[i]);

    for(i = 0; i < n; i++)
        leading[i][0] = '\0';

    for(i = 0; i < n; i++)
        findLeading(i);

    printf("\nLEADING sets:\n");
    for(i = 0; i < n; i++)
        printf("LEADING(%c) = { %s }\n", prod[i][0], leading[i]);

    return 0;
}
